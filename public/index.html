<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <link rel="stylesheet" href="/assets/styles/main.css">
    <link rel="import" href="/components/rate-panel.html">
</head>
<body>

<main>
    <h1>Web components</h1>
    <p>This page demonstrates various browser features that are often referred to as <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">web components</a>.</p>

    <h2>Rate panels</h2>
    <div class="rate-panel-list js-rate-panel-list"></div>
    <button class="js-rate-panel-button-add">Add rate panel</button>
</main>

<script src="assets/scripts/main.js"></script>
<script>
const ratePanels = [
    {
        currencyBase: 'EUR',
        currencyTransaction: 'USD',
    }, {
        currencyBase: 'EUR',
        currencyTransaction: 'GBP',
    }, {
        currencyBase: 'EUR',
        currencyTransaction: 'JPY',
    }, {
        currencyBase: 'BTC',
        currencyTransaction: 'EUR',
    },
];

const ratePanelList = document.querySelector('.js-rate-panel-list');
const ratePanelButtonAdd  = document.querySelector('.js-rate-panel-button-add');

const onRatePanelClose = (e) => {
    const ratePanel = e.target;
    ratePanel.parentElement.removeChild(ratePanel);
};

ratePanels.forEach((ratePanelSettings) => {
    const ratePanel = createRatePanel(ratePanelSettings);
    ratePanel.addEventListener('close', onRatePanelClose);

    ratePanelList.appendChild(ratePanel);
});

ratePanelButtonAdd.addEventListener('click', () => {
    const ratePanelIndex = Math.floor(Math.random() * ratePanels.length);
    const ratePanelSettings = ratePanels[ratePanelIndex];
    const ratePanel = createRatePanel(ratePanelSettings);
    ratePanel.addEventListener('close', onRatePanelClose);

    ratePanelList.appendChild(ratePanel);
});
</script>

</body>
</html>